---
layout: post                          
title: 计网常见面试点                            
subtitle:                             
date: 2019-07-18                      
author: luojiaqi                      
header-img: img/post-bg-re-vs-ng2.jpg 
catalog: true                         
tags:                                 
    计算机网络                             
---

![](http://ww1.sinaimg.cn/large/609af245ly1g53yc3b1fzj20lg0batd5.jpg)

# TCP、UDP协议的区别

<table border="1" align="center">
   <tr>
      <td rowspan="2">类型</td>
      <td colspan="3">特点</td>
      <td colspan="2">性能</td>
      <td rowspan="2">应用场景</td>
      <td rowspan="2">首部字节</td>
   </tr>
   <tr>
      <td>是否面向连接</td>
      <td>传输可靠性</td>
      <td>传输形式</td>
      <td>传输效率</td>
      <td>所需资源</td>
   </tr>
   <tr>
      <td>TCP</td>
      <td>面向连接</td>
      <td>可靠</td>
      <td>字节流</td>
      <td>慢</td>
      <td>多</td>
      <td>要求数据可靠（如文件传输、邮件传输）</td>
      <td>20-60</td>
   </tr>
   <tr>
      <td>UDP</td>
      <td>面向无连接</td>
      <td>不可靠</td>
      <td>数组报文段</td>
      <td>快</td>
      <td>少</td>
      <td>要求通信速度高（如域名转换）</td>
      <td>8个字节（由4个字段组成）</td>
   </tr>
</table>

UDP 在传送数据之前不需要先建立连接，远地主机在收到 UDP 报文后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 确是一种最有效的工作方式（一般用于即时通信），比如： QQ 语音、 QQ 视频 、直播等等
TCP 提供面向连接的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。 TCP 不提供广播或多播服务。由于 TCP 要提供可靠的，面向连接的运输服务（TCP的可靠体现在TCP在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源），这样难以避免增加了许多开销，如确认，流量控制，计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。TCP 一般用于文件传输、发送和接收邮件、远程登录等场景。 

# 在浏览器中输入URL地址到显示网页的过程

1.DNS解析

2.TCP连接

3.发送HTTP请求

4.服务器处理请求并返回HTTP报文

5.浏览器解析渲染页面

6.连接结束

[从输入URL到页面加载发生了什么](https://segmentfault.com/a/1190000006879700 )

# 各种协议与HTTP协议之间的关系

![](http://ww1.sinaimg.cn/large/609af245ly1g5404rzg57j20hb0or7ek.jpg)

# HTTP长连接、短连接

在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。
而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：
`Connection:keep-alive`
在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。
**HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接。 **

[HTTP长连接、短连接究竟是什么？](https://www.cnblogs.com/gotodsp/p/6366163.html)

# TCP三次握手和四次挥手

为了准确无误地把数据送达目标处，TCP协议采用了三次握手策略 

![](http://ww1.sinaimg.cn/large/609af245ly1g540akv0iuj20pe0dugtq.jpg)

![](http://ww1.sinaimg.cn/large/609af245ly1g540b6x0hqj20dn0cqjte.jpg)

+ 客户端–发送带有 SYN 标志的数据包–一次握手–服务端
+ 服务端–发送带有 SYN/ACK 标志的数据包–二次握手–客户端
+ 客户端–发送带有带有 ACK 标志的数据包–三次握手–服务端 

> 为什么要三次握手?

**三次握手的目的是建立可靠的通信信道，说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。**
第一次握手：Client 什么都不能确认；Server 确认了对方发送正常
第二次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己接收正常，对方发送正常
第三次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己发送、接收正常，对方发送接收正常
所以三次握手就能确认双发收发功能都正常，缺一不可。

> 为什么要传回 SYN

接收端传回发送端所发送的 SYN 是为了告诉发送端，我接收到的信息确实就是你所发送的信号了。

> SYN 是 TCP/IP 建立连接时使用的握手信号。在客户机和服务器之间建立正常的 TCP 网络连接时，客户机首先发出一个 SYN 消息，服务器使用 SYN-ACK 应答表示接收到了这个消息，最后客户机再以ACK(Acknowledgement[汉译：确认字符 ,在数据通信传输中，接收站发给发送站的一种传输控制字符。它表示确认发来的数据已经接受无误。 ]）消息响应。这样在客户机和服务器之间才能建立起可靠的TCP连接，数据才可以在客户机和服务器之间传递。 

> 传了 SYN,为啥还要传 ACK

双方通信无误必须是两者互相发送信息都无误。传了 SYN，证明发送方到接收方的通道没有问题，但是接收方到发送方的通道还需要 ACK 信号来进行验证。

![](http://ww1.sinaimg.cn/large/609af245ly1g540duarlnj20ew09b75s.jpg)

断开一个 TCP 连接则需要“四次挥手”：

+ 客户端-发送一个 FIN，用来关闭客户端到服务器的数据传送

+ 服务器-收到这个 FIN，它发回一 个 ACK，确认序号为收到的序号加1 。和 SYN 一样，一个 FIN 将占用一个序号

+ 服务器-关闭与客户端的连接，发送一个FIN给客户端

+ 客户端-发回 ACK 报文确认，并将确认序号设置为收到序号加1

> 为什么要四次挥手

任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了TCP连接。
举个例子：A 和 B 打电话，通话即将结束后，A 说“我没啥要说的了”，B回答“我知道了”，但是 B 可能还会有要说的话，A 不能要求 B 跟着自己的节奏结束通话，于是 B 可能又巴拉巴拉说了一通，最后 B 说“我说完了”，A 回答“知道了”，这样通话才算结束。

上面讲的比较概括，推荐一篇讲的比较细致的文章：
https://blog.csdn.net/qzcsu/article/details/72861891 